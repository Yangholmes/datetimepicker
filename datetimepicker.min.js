var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$.fn.datetimepicker=function(a){var b=this;if("INPUT"!==this[0].tagName)return!1;a||(a={});a.bindObj=this;var c=new Datetimepicker(a);this.on("touchstart",function(){b.blur()}).on("touchend",function(){c.show()}).on("focus",function(){c.show()})};var Datetimepicker=function(a){a||(a={});this.config=a;this.initDateTimePicker()};
Datetimepicker.prototype={constructor:Datetimepicker,config:{},baseHeight:16,onSelect:null,onChange:null,year:null,month:null,date:null,hour:null,minute:null,years:[],months:[],dates:[],hours:[],minutes:[],yearSlot:"",monthSlot:"",dateSlot:"",hourSlot:"",minuteSlot:"",unitbar:"",picker:"",toolbar:"",thisDateTimePicker:{},unit:{cn:{year:"\u5e74",month:"\u6708",date:"\u65e5",hour:"\u65f6",minute:"\u5206"},en:{year:"Year",month:"Month",date:"Date",hour:"Hour",minute:"Minute"}},templatePicker:'\n    <div class="picker">\n      <div class="center-view"></div>\n    </div>\n  ',
templateSlot:'\n    <div class="slot"></div>\n  ',templateUnit:'\n    <div class="unit">\n      <div class="year"></div>\n      <div class="month"></div>\n      <div class="date"></div>\n      <div class="hour"></div>\n      <div class="minute"></div>\n    </div>\n  ',templateToolbar:'\n    <div class="toolbar">\n      <div class="cancel">\u53d6\u6d88</div>\n      <div class="confirm">\u786e\u5b9a</div>\n    </div>\n  ',style:".picker,.slot{margin:0 auto}.option,.toolbar div,.unit{line-height:1.5em}.mask{width:100%;height:100%;display:block;position:fixed;top:0;left:0;background:rgba(50,50,50,.7);z-index:999}.datetimepicker{display:none;position:fixed;width:80%;height:calc(1.5em * 6);left:10%;top:calc(30% - 3em * 1.5);z-index:1000;border-radius:3px;box-shadow:0 0 10px 2px}.unit{display:flex;justify-content:space-around;position:absolute;width:100%;height:1.5em;top:0;background:rgba(136,136,136,.8);z-index:999}.picker,.toolbar{position:absolute;background:#fff;width:100%}.picker{font-size:1em;display:block;height:7.5em;overflow:hidden}.center-view{display:block;position:absolute;border-top:1px solid rgba(200,200,200,1);border-bottom:1px solid rgba(200,200,200,1);width:100%;height:1.5em;top:3em}.slot{display:inline-block;min-width:20%;height:auto;text-align:center;vertical-align:top;color:rgba(120,120,120,.5)}.option{display:block;font-size:1em}.option:after{content:'';position:absolute}.chosen{color:#000}.toolbar{display:flex;justify-content:space-around;top:calc(1.5em * 5 - 1px);box-sizing:border-box;border-top:1px solid rgba(120,120,120,.5)}.toolbar div{width:100%;text-align:center;background:rgba(255,255,255,0)}.picker,.unit{border-radius:3px 3px 0 0}.toolbar{border-radius:0 0 3px 3px}",
initDateTimePicker:function(){this.initDt(this.config.initDt,this.generate);this.onSelect=this.config.onSelect?this.config.onSelect:function(){};this.onChange=this.config.onChange?this.config.onChange:function(){}},initDt:function(a,b){a=a?new Date(a):new Date;this.year=a.getFullYear();this.month=a.getMonth()+1;this.date=a.getDate();this.hour=a.getHours();this.minute=a.getMinutes();b.call(this)},generate:function(){this.generateStyle();this.generateYears(this.year);this.generateMonths(this.month);
this.generateDates(this.date);this.generateHours(this.hour);this.generateMinutes(this.minute);this.generatePicker();this.generateUnitbar();this.generateToolbar();this.render()},generateYears:function(a){var b=[];b[20]=a;for(var c=1;21>c;c++)b[20-c]=a-c,b[20+c]=a+c;this.years=b;this.generateSlot(this.years,20,"year");return this.years},generateMonths:function(a){for(a=0;12>a;a++)this.months[a]=a+1;this.generateSlot(this.months,this.month-1,"month");return this.months},generateDates:function(a){this.dates=
[];a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28];-1!==[1,3,5,7,8,10,12].indexOf(this.month)?this.dates=a.concat([29,30,31]):this.dates=2!==this.month?a.concat([29,30]):0!=this.year%100&&0==this.year%4||0==this.year%100&&0==this.year%400?a.concat([29]):a;this.generateSlot(this.dates,this.date-1,"date");return this.dates},generateHours:function(a){for(a=0;24>a;a++)this.hours[a]=a;this.generateSlot(this.hours,this.hour,"hour");return this.hours},generateMinutes:function(a){for(a=
0;60>a;a++)this.minutes[a]=a;this.generateSlot(this.minutes,this.minute,"minute");return this.minutes},generateSlot:function(a,b,c){var d=[],e=(2-b)*this.baseHeight*1.5;if(0===a.length)return!1;for(var f=0;f<a.length;f++)d[f]=$("<div>").addClass("option"+(f==b?" chosen":"")).html(a[f]);this[c+"Slot"]=$(this.templateSlot).addClass(c).css("transform","translateY("+e+"px)").append(d);return this.addSlotEventListener(this[c+"Slot"])},generateStyle:function(){$(".datetimepicker-style").length||$("<style>").addClass("datetimepicker-style").html(this.style).appendTo("head");
switch(this.config.size){case "regular":this.baseHeight=20;break;case "small":this.baseHeight=16;break;case "big":this.baseHeight=24;break;default:this.baseHeight=20}},generatePicker:function(){var a=$(this.templatePicker).attr("id",this.config.id);!1===this.config.timepicker&&!1!==this.config.datepicker?a.append([this.yearSlot,this.monthSlot,this.dateSlot]):!1===this.config.datepicker&&!1!==this.config.timepicker?a.append([this.hourSlot,this.minuteSlot]):a.append([this.yearSlot,this.monthSlot,this.dateSlot,
this.hourSlot,this.minuteSlot]);return this.picker=a},generateUnitbar:function(){var a=this,b=this.config.lang?this.config.lang:"cn";this.unitbar=$(this.templateUnit);["year","month","date","hour","minute"].forEach(function(c){a.unitbar.find("."+c).html(a.unit[b][c])});return this.unitbar},generateToolbar:function(){this.toolbar=$(this.templateToolbar);this.addToolbarEventListener(this.toolbar);return this.toolbar},render:function(){this.thisDateTimePicker=$("<div>").addClass("datetimepicker").css("font-size",
this.baseHeight+"px").append(this.unitbar,this.picker,this.toolbar).appendTo($("body"))},addSlotEventListener:function(a){var b=!1,c,d,e,f,g,k,h=this;a.on("touchstart",function(a){b=!0;c=a.changedTouches[0].clientY;k=parseInt($(this).css("height"));e=parseInt($(this).css("transform").match(/, *(-?\d+)\)$/)[1]);$(this).find(".option").removeClass("chosen")}).on("touchend",function(a){b=!1;g=(d/1.5/h.baseHeight).toFixed();2<g?g=2:g<0-k/1.5/h.baseHeight+3&&(g=0-k/1.5/h.baseHeight+3);$(this).css("transform",
"translateY("+1.5*g*h.baseHeight+"px)");g=parseInt(g);var c=2-g;$(this).find(".option").eq(c).addClass("chosen");h.updateSlot(a)}).on("touchmove",function(a){a.preventDefault();if(!b)return!1;f=a.changedTouches[0].clientY-c;d=f+e;$(this).css("transform","translateY("+d+"px)")});return a},addToolbarEventListener:function(a){var b=this;a.find(".cancel").on("touchstart",function(a){$(a.currentTarget).css("background","rgba(136, 136, 136, 0.8)")}).on("touchend",function(a){$(a.currentTarget).css("background",
"none");b.close()});a.find(".confirm").on("touchstart",function(a){$(a.currentTarget).css("background","rgba(136, 136, 136, 0.8)")}).on("touchend",function(a){$(a.currentTarget).css("background","none");b.select()})},updateSlot:function(a){var b=a.currentTarget;a=$(b).find(".chosen");b=b.className.replace("slot ","");this[b]=parseInt(a.html());if("month"===b||"year"===b)31===this.date&&-1!==[4,6,9,11].indexOf(this.month)?this.date=30:29<=this.date&&2===this.month&&(this.date=28),this.generateDates(),
this.thisDateTimePicker.find(".slot.date").replaceWith(this.dateSlot);this.onChange()},show:function(){$("body .mask").length||$("<div>").addClass("mask").appendTo($("body"));$("body .mask").show();this.thisDateTimePicker.fadeIn(400)},close:function(){$("body .mask").hide();this.thisDateTimePicker.fadeOut(400)},select:function(){var a;a=(this.config.format?this.config.format:"Y/M/d H:i").replace("Y",this.year).replace("M",this.month).replace("d",this.date).replace("H",this.hour).replace("i",this.minute);
this.config.bindObj.val(a);this.close();this.onSelect(a)}};
